(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{323:function(e,t,o){"use strict";o.r(t);o(57);var r=o(19),n={data:function(){return{editorOption:{bounds:"app",placeholder:"",modules:{toolbar:{container:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["image"]]}}},editorHeight:0,editorOpacity:0,editorPointerEvents:"none",loading:!1,courseDayNumber:0,courseDayCalendar:"",daySelected:"select",contentSelected:"youtube",contentOptions:[{item:"youtube",name:"Видео"},{item:"file",name:"Файл"},{item:"editor",name:"Текст зураг"}],form:{title:"",dayNumber:"",dayCalendar:"",content:"",file:null,youtube:"",duration:"",locked:"locked"}}},created:function(){this.form.dayMode=this.$route.query.dayMode,"select"===this.$route.query.dayMode&&(isNaN(this.$route.query.dayNumber)||(this.courseDayNumber=parseInt(this.$route.query.dayNumber)))},filters:{truncate:function(text,e,t){return text.length>e?text.substring(0,e)+t:text}},methods:{onEditorChange:function(e){e.editor;var html=e.html;e.text;this.form.content=html},onSubmit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o,r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,o={"Content-Type":"multipart/form-data"},r=e.form.file?"uploaded":"no_upload","editor"!==e.contentSelected&&(e.form.content=""),(n=new FormData).append("courseId",e.$route.params.id),n.append("title",e.form.title),n.append("file",e.form.file),n.append("fileUpload",r),n.append("content",e.form.content),n.append("youtube",e.form.youtube),n.append("contentMode",e.contentSelected),n.append("content",e.form.content),n.append("dayNumber",e.form.dayNumber),n.append("dayCalendar",e.form.dayCalendar),n.append("locked",e.form.locked),n.append("duration",e.form.duration),t.prev=17,t.next=20,e.$axios.post("/lessons",n,o);case 20:t.sent.data.success&&e.$router.push({name:"courses-id-show",params:{id:e.$route.params.id}}),e.loading=!1,t.next=29;break;case 25:t.prev=25,t.t0=t.catch(17),e.loading=!1,console.log(t.t0);case 29:case"end":return t.stop()}}),t,null,[[17,25]])})))()}},watch:{daySelected:function(){this.form.day=""},contentSelected:function(e){"editor"===e?(this.editorOpacity=1,this.editorHeight=250,this.editorPointerEvents="auto"):(this.editorOpacity=0,this.editorHeight=0,this.editorPointerEvents="none"),"file"!==e&&(this.form.file=null),"youtube"!==e&&(this.form.youtube="")}}},l=o(48),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container-fliud"},[o("div",{staticClass:"content p-3"},[o("nav",{attrs:{"aria-label":"breadcrumb"}},[o("ol",{staticClass:"breadcrumb"},[o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/home"}},[e._v("Нүүр")])],1),e._v(" "),o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:"/courses"}},[e._v("Хөтөлбөрүүд")])],1),e._v(" "),o("li",{staticClass:"breadcrumb-item"},[o("nuxt-link",{attrs:{to:{name:"courses-id-show",params:{id:e.$route.params.id}}}},[e._v("\n              "+e._s(e._f("truncate")(e.$route.query.title,40,"..."))+"\n            ")])],1),e._v(" "),o("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v("Шинэ хичээл")])])]),e._v(" "),o("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[o("b-card",{attrs:{"bg-variant":"light","text-variant":"dark"},scopedSlots:e._u([{key:"header",fn:function(){return[o("h6",{staticClass:"float-left"},[e._v("Хичээл нэмэх")]),e._v(" "),o("div",{staticClass:"float-right"},[e.loading?e._e():o("b-button",{attrs:{variant:"primary",type:"submit"}},[e._v("\n                Хадгалах\n              ")]),e._v(" "),e.loading?o("b-button",{attrs:{variant:"primary",disabled:""}},[o("b-spinner",{attrs:{small:""}}),e._v(" "),o("span",{staticClass:"sr-only"},[e._v("Loading...")])],1):e._e()],1)]},proxy:!0}])},[e._v(" "),o("b-form-group",{attrs:{label:"Өдөр сонгох"}},["select"===e.$route.query.dayMode?o("b-form-select",{attrs:{required:""},model:{value:e.form.dayNumber,callback:function(t){e.$set(e.form,"dayNumber",t)},expression:"form.dayNumber"}},[o("option",{attrs:{value:""}},[e._v("-- Сонгох --")]),e._v(" "),e._l(e.courseDayNumber,(function(t,r){return o("option",{key:r,domProps:{value:t}},[e._v("\n                "+e._s(t)+" өдөр\n              ")])}))],2):e._e(),e._v(" "),"calendar"===e.$route.query.dayMode?o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.dayCalendar,expression:"form.dayCalendar"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:e.form.dayCalendar},on:{input:function(t){t.target.composing||e.$set(e.form,"dayCalendar",t.target.value)}}}):e._e()],1),e._v(" "),o("b-form-group",{attrs:{id:"input-group-1",label:"Хичээлийн гарчиг","label-for":"input-1"}},[o("b-form-input",{attrs:{id:"input-1",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("b-form-radio-group",{staticClass:"mb-3",attrs:{options:e.contentOptions,"value-field":"item","text-field":"name","disabled-field":"notEnabled"},model:{value:e.contentSelected,callback:function(t){e.contentSelected=t},expression:"contentSelected"}}),e._v(" "),"youtube"===e.contentSelected?o("b-form-group",{attrs:{id:"input-youtube"}},[o("b-form-input",{attrs:{id:"input-youtube",type:"text",placeholder:"Video"},model:{value:e.form.youtube,callback:function(t){e.$set(e.form,"youtube",t)},expression:"form.youtube"}})],1):e._e(),e._v(" "),"file"===e.contentSelected?o("b-form-group",[o("b-form-file",{attrs:{placeholder:"Pdf, excel, image ..."},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1):e._e(),e._v(" "),o("b-form-group",{attrs:{id:"input-duration",label:"Хугацаа/Хэмжээ"}},[o("b-form-input",{attrs:{id:"input-youtube",type:"text",placeholder:"Файл - 10 миниут, 3kb"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1),e._v(" "),o("b-form-checkbox",{attrs:{id:"checkbox-lesson",value:"locked","unchecked-value":"unlocked"},model:{value:e.form.locked,callback:function(t){e.$set(e.form,"locked",t)},expression:"form.locked"}},[e._v("\n            Хичээл түгжих / нээх\n          ")]),e._v(" "),o("div",{staticClass:"mt-3",style:{opacity:e.editorOpacity+" !important","pointer-events":e.editorPointerEvents}},[o("div",{directives:[{name:"quill",rawName:"v-quill:myQuillEditor",value:e.editorOption,expression:"editorOption",arg:"myQuillEditor"}],staticClass:"quill-editor",staticStyle:{"background-color":"white"},style:{height:e.editorHeight+"px"},attrs:{content:e.form.content},on:{change:function(t){return e.onEditorChange(t)}}})])],1)],1)],1)])}),[],!1,null,null,null);t.default=component.exports}}]);